package com.sailing.nmeaParser.messages {import com.sailing.datas.Vwt;import com.sailing.nmeaParser.utils.NmeaUtil;public class NmeaVwtMessage implements NmeaMessage {    private var data:Vwt = new Vwt();    private var isValid:Boolean = true;    public function parse(packet:String):void {        isValid = true;        var parts:Array = packet.split(",");        if(parts[1].length>0) {            data.relativeWindAngleToVessel.value = new Number(parts[1]);            data.vesselHeading = parts[2];            if (data.vesselHeading == "L" || data.vesselHeading == "left") {                data.relativeWindAngleToVessel.value = data.relativeWindAngleToVessel.getPureData() * -1;            }        } else {            isValid = false;        }        if (parts[3] != "") {            //knots            data.windSpeed.value = new Number(parts[3]);        } else if (parts[5] != "") {            //m/s to knots            data.windSpeed.value = NmeaUtil.meterSecToKnots(parts[5]);        } else {            //km/h to knots            data.windSpeed.value = NmeaUtil.kmhToKnots(parts[7]);        }    }    public function process():Object {        if (data.windSpeed.getPureData() > 200) {            return null;        }        return isValid ? {key: "vwt", data: data} : null;    }}}